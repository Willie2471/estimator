<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Landscaping Cost Estimator</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <!-- Google Maps API - Replace YOUR_API_KEY with your actual API key -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBHvZq7kiDX_thzi8F9XTg_bySLcxpd_ME&libraries=drawing,geometry"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      margin: 0;
      padding: 0;
      font-family: 'Space Mono', monospace;
      background: #f5f5f5;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;
    const Calculator = ({ size = 24, strokeWidth = 2, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" {...props}>
        <rect width="16" height="20" x="4" y="2" rx="2"/>
        <line x1="8" x2="16" y1="6" y2="6"/>
        <line x1="16" x2="16" y1="14" y2="18"/>
        <path d="M16 10h.01"/>
        <path d="M12 10h.01"/>
        <path d="M8 10h.01"/>
        <path d="M12 14h.01"/>
        <path d="M8 14h.01"/>
        <path d="M12 18h.01"/>
        <path d="M8 18h.01"/>
      </svg>
    );

    const Leaf = ({ size = 24, strokeWidth = 2, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" {...props}>
        <path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z"/>
        <path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"/>
      </svg>
    );

    const Package = ({ size = 24, strokeWidth = 2, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" {...props}>
        <path d="m7.5 4.27 9 5.15"/>
        <path d="M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z"/>
        <path d="m3.3 7 8.7 5 8.7-5"/>
        <path d="M12 22V12"/>
      </svg>
    );

    const Layers = ({ size = 24, strokeWidth = 2, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" {...props}>
        <path d="m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"/>
        <path d="m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65"/>
        <path d="m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65"/>
      </svg>
    );

    const DollarSign = ({ size = 24, strokeWidth = 2, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" {...props}>
        <line x1="12" x2="12" y1="2" y2="22"/>
        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
      </svg>
    );

    const FileText = ({ size = 24, strokeWidth = 2, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" {...props}>
        <path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/>
        <path d="M14 2v4a2 2 0 0 0 2 2h4"/>
        <path d="M10 9H8"/>
        <path d="M16 13H8"/>
        <path d="M16 17H8"/>
      </svg>
    );

    const Download = ({ size = 24, strokeWidth = 2, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" {...props}>
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
        <polyline points="7 10 12 15 17 10"/>
        <line x1="12" x2="12" y1="15" y2="3"/>
      </svg>
    );

    const Map = ({ size = 24, strokeWidth = 2, ...props }) => (
      <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth={strokeWidth} strokeLinecap="round" strokeLinejoin="round" {...props}>
        <path d="M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z"/>
        <path d="M15 5.764v15"/>
        <path d="M9 3.236v15"/>
      </svg>
    );

    // Material pricing data from Google Sheet
    const MATERIALS = {
      mulch: [
        { name: 'Pine Bark', pricePerYard: 34, pricePerHalf: 17 },
        { name: 'Brown Mulch', pricePerYard: 34, pricePerHalf: 17 },
        { name: 'Red Mulch', pricePerYard: 34, pricePerHalf: 17 },
        { name: 'Chocolate Mulch', pricePerYard: 34, pricePerHalf: 17 }
      ],
      rock: [
        { name: '2" Granite', pricePerYard: 170, pricePerHalf: 85 },
        { name: '3/4" Brown Pea Stone', pricePerYard: 180, pricePerHalf: 90 },
        { name: '1.5" Brown River Rock', pricePerYard: 220, pricePerHalf: 110 },
        { name: '1-3" Brown River Rock', pricePerYard: 230, pricePerHalf: 115 },
        { name: 'Red Lava Rock', pricePerYard: 230, pricePerHalf: 115 }
      ],
      dirt: [
        { name: 'Fill Dirt/Top Soil', pricePerYard: 40, pricePerHalf: 20 }
      ],
      sod: [
        { name: 'Argentine Bahia', pricePerPallet: 170.5, pricePerSqFt: 0.42625 },
        { name: 'St. Augustine Floratam', pricePerPallet: 239.91, pricePerSqFt: 0.599775 },
        { name: 'St. Augustine Pro Vista', pricePerPallet: 313.74, pricePerSqFt: 0.78435 },
        { name: 'St. Augustine Citra Blue', pricePerPallet: 292.34, pricePerSqFt: 0.73085 },
        { name: 'Icon Zoysia', pricePerPallet: 313.74, pricePerSqFt: 0.78435 }
      ]
    };

    const ADDONS = {
      geoTextile: { name: 'Geo Textile Fabric', pricePerLinearFt: 1.20 },
      edging: { name: 'Composite Edging', pricePerLinearFt: 5.00 }
    };

    function LandscapingEstimator() {
      const [projectName, setProjectName] = useState('');
      const [projectType, setProjectType] = useState('');
      
      const [materialCategory, setMaterialCategory] = useState('mulch');
      const [selectedMaterial, setSelectedMaterial] = useState(null);
      
      const [length, setLength] = useState('');
      const [width, setWidth] = useState('');
      const [depth, setDepth] = useState('1');
      
      const [sqFt, setSqFt] = useState('');
      
      const [includeGeoTextile, setIncludeGeoTextile] = useState(false);
      const [geoTextileLinearFt, setGeoTextileLinearFt] = useState('');
      const [includeEdging, setIncludeEdging] = useState(false);
      const [edgingLinearFt, setEdgingLinearFt] = useState('');
      
      // Equipment rows (5 rows)
      const [equipmentRows, setEquipmentRows] = useState([
        { description: '', cost: '' },
        { description: '', cost: '' },
        { description: '', cost: '' },
        { description: '', cost: '' },
        { description: '', cost: '' }
      ]);
      
      const [laborHours, setLaborHours] = useState('');
      const [laborRate, setLaborRate] = useState('50');
      
      const [deliveryFee, setDeliveryFee] = useState('');
      const [haulAway, setHaulAway] = useState('');
      const [markupPercent, setMarkupPercent] = useState('0');
      
      // Google Maps state
      const [showMap, setShowMap] = useState(false);
      const [mapMeasurements, setMapMeasurements] = useState([]);
      const [map, setMap] = useState(null);
      const [drawingManager, setDrawingManager] = useState(null);
      const mapRef = React.useRef(null);
      
      const [estimate, setEstimate] = useState(null);

      useEffect(() => {
        if (materialCategory && MATERIALS[materialCategory].length > 0) {
          setSelectedMaterial(MATERIALS[materialCategory][0]);
        }
      }, [materialCategory]);

      const updateEquipmentRow = (index, field, value) => {
        const newRows = [...equipmentRows];
        newRows[index][field] = value;
        setEquipmentRows(newRows);
      };

      // Initialize Google Maps
      useEffect(() => {
        if (showMap && mapRef.current && !map && window.google) {
          const newMap = new window.google.maps.Map(mapRef.current, {
            center: { lat: 28.6139, lng: -80.8075 }, // Titusville, FL
            zoom: 18,
            mapTypeId: 'satellite',
            tilt: 0
          });

          const newDrawingManager = new window.google.maps.drawing.DrawingManager({
            drawingMode: window.google.maps.drawing.OverlayType.POLYGON,
            drawingControl: true,
            drawingControlOptions: {
              position: window.google.maps.ControlPosition.TOP_CENTER,
              drawingModes: [
                window.google.maps.drawing.OverlayType.POLYGON,
                window.google.maps.drawing.OverlayType.RECTANGLE
              ]
            },
            polygonOptions: {
              fillColor: '#27ae60',
              fillOpacity: 0.3,
              strokeWeight: 2,
              strokeColor: '#27ae60',
              clickable: true,
              editable: true,
              zIndex: 1
            },
            rectangleOptions: {
              fillColor: '#27ae60',
              fillOpacity: 0.3,
              strokeWeight: 2,
              strokeColor: '#27ae60',
              clickable: true,
              editable: true,
              zIndex: 1
            }
          });

          newDrawingManager.setMap(newMap);

          // Handle shape completion
          window.google.maps.event.addListener(newDrawingManager, 'overlaycomplete', (event) => {
            let area = 0;
            let perimeter = 0;

            if (event.type === 'polygon') {
              const path = event.overlay.getPath();
              area = window.google.maps.geometry.spherical.computeArea(path);
              
              // Calculate perimeter
              for (let i = 0; i < path.getLength(); i++) {
                const point1 = path.getAt(i);
                const point2 = path.getAt((i + 1) % path.getLength());
                perimeter += window.google.maps.geometry.spherical.computeDistanceBetween(point1, point2);
              }
            } else if (event.type === 'rectangle') {
              const bounds = event.overlay.getBounds();
              const ne = bounds.getNorthEast();
              const sw = bounds.getSouthWest();
              const nw = new window.google.maps.LatLng(ne.lat(), sw.lng());
              const se = new window.google.maps.LatLng(sw.lat(), ne.lng());
              
              area = window.google.maps.geometry.spherical.computeArea([ne, se, sw, nw]);
              
              const width = window.google.maps.geometry.spherical.computeDistanceBetween(nw, ne);
              const height = window.google.maps.geometry.spherical.computeDistanceBetween(nw, sw);
              perimeter = 2 * (width + height);
            }

            // Convert to square feet and feet
            const sqFeet = area * 10.7639; // m¬≤ to ft¬≤
            const perimeterFeet = perimeter * 3.28084; // m to ft

            const measurement = {
              id: Date.now(),
              overlay: event.overlay,
              type: event.type,
              area: sqFeet,
              perimeter: perimeterFeet
            };

            setMapMeasurements(prev => [...prev, measurement]);
          });

          setMap(newMap);
          setDrawingManager(newDrawingManager);
        }
      }, [showMap, map]);

      // Calculate total measurements from map
      const totalMapArea = mapMeasurements.reduce((sum, m) => sum + m.area, 0);
      const totalMapPerimeter = mapMeasurements.reduce((sum, m) => sum + m.perimeter, 0);

      // Apply map measurements to fields
      const applyMapMeasurements = () => {
        if (materialCategory === 'sod') {
          setSqFt(totalMapArea.toFixed(2));
        } else {
          // For other materials, estimate length and width from area
          const estimatedSide = Math.sqrt(totalMapArea);
          setLength(estimatedSide.toFixed(2));
          setWidth(estimatedSide.toFixed(2));
        }
        
        // Apply perimeter to edging if it's enabled
        if (includeEdging) {
          setEdgingLinearFt(totalMapPerimeter.toFixed(2));
        }
      };

      const clearMapMeasurements = () => {
        mapMeasurements.forEach(m => {
          if (m.overlay) {
            m.overlay.setMap(null);
          }
        });
        setMapMeasurements([]);
      };

      const removeMeasurement = (id) => {
        const measurement = mapMeasurements.find(m => m.id === id);
        if (measurement && measurement.overlay) {
          measurement.overlay.setMap(null);
        }
        setMapMeasurements(prev => prev.filter(m => m.id !== id));
      };

      const calculateEstimate = () => {
        if (!selectedMaterial) return;

        let materialCost = 0;
        let cubicYards = 0;
        let cubicFeet = 0;
        let totalSqFt = 0;
        let totalLinearFt = 0;

        if (materialCategory === 'sod') {
          const sqFtNum = parseFloat(sqFt) || 0;
          totalSqFt = sqFtNum;
          materialCost = sqFtNum * selectedMaterial.pricePerSqFt;
        } else {
          const lengthNum = parseFloat(length) || 0;
          const widthNum = parseFloat(width) || 0;
          const depthNum = parseFloat(depth) || 1;
          
          totalSqFt = lengthNum * widthNum;
          totalLinearFt = lengthNum;
          cubicFeet = (lengthNum * widthNum * depthNum) / 12;
          cubicYards = cubicFeet / 27;
          
          materialCost = cubicYards * selectedMaterial.pricePerYard;
        }

        const geoTextileCost = includeGeoTextile ? (parseFloat(geoTextileLinearFt) || 0) * ADDONS.geoTextile.pricePerLinearFt : 0;
        const edgingCost = includeEdging ? (parseFloat(edgingLinearFt) || 0) * ADDONS.edging.pricePerLinearFt : 0;
        const addOnsCost = geoTextileCost + edgingCost;

        const laborCost = (parseFloat(laborHours) || 0) * (parseFloat(laborRate) || 0);
        
        // Calculate total equipment cost from all rows
        const equipmentCost = equipmentRows.reduce((total, row) => {
          return total + (parseFloat(row.cost) || 0);
        }, 0);
        
        const delivery = parseFloat(deliveryFee) || 0;
        const haul = parseFloat(haulAway) || 0;

        const subtotal = materialCost + addOnsCost + laborCost + equipmentCost + delivery + haul;
        const markupAmount = subtotal * (parseFloat(markupPercent) / 100);
        const totalWithMarkup = subtotal + markupAmount;

        const targetProfit = totalWithMarkup * 0.4;
        const recommendedPrice = totalWithMarkup + targetProfit;
        const profitMargin = (targetProfit / recommendedPrice) * 100;

        setEstimate({
          materialCost,
          addOnsCost,
          geoTextileCost,
          edgingCost,
          laborCost,
          equipmentCost: equipmentCost,
          equipmentRows: equipmentRows.filter(row => row.description || row.cost),
          deliveryFee: delivery,
          haulAway: haul,
          subtotal,
          markupAmount,
          totalWithMarkup,
          targetProfit,
          recommendedPrice,
          profitMargin,
          cubicYards,
          cubicFeet,
          totalSqFt,
          totalLinearFt
        });
      };

      useEffect(() => {
        calculateEstimate();
      }, [selectedMaterial, length, width, depth, sqFt, includeGeoTextile, geoTextileLinearFt, 
          includeEdging, edgingLinearFt, laborHours, laborRate, equipmentRows, deliveryFee, 
          haulAway, markupPercent]);

      const formatCurrency = (value) => {
        return new Intl.NumberFormat('en-US', {
          style: 'currency',
          currency: 'USD',
          minimumFractionDigits: 2
        }).format(value || 0);
      };

      const generateSummaryReport = () => {
        if (!estimate) return '';

        return `LANDSCAPING PROJECT ESTIMATE
${projectName ? `Project: ${projectName}` : ''}
${projectType ? `Type: ${projectType}` : ''}
Generated: ${new Date().toLocaleDateString()}

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

MATERIALS
${selectedMaterial ? selectedMaterial.name : 'No material selected'}
${materialCategory !== 'sod' ? `Area: ${estimate.totalSqFt.toFixed(2)} sq ft` : ''}
${materialCategory !== 'sod' ? `Volume: ${estimate.cubicYards.toFixed(2)} cu yd (${estimate.cubicFeet.toFixed(2)} cu ft)` : ''}
${materialCategory === 'sod' ? `Area: ${estimate.totalSqFt.toFixed(2)} sq ft` : ''}
Material Cost: ${formatCurrency(estimate.materialCost)}

ADD-ONS
${includeGeoTextile ? `Geo Textile Fabric (${geoTextileLinearFt} linear ft): ${formatCurrency(estimate.geoTextileCost)}` : ''}
${includeEdging ? `Composite Edging (${edgingLinearFt} linear ft): ${formatCurrency(estimate.edgingCost)}` : ''}
Total Add-ons: ${formatCurrency(estimate.addOnsCost)}

LABOR & EQUIPMENT
Labor (${laborHours} hrs @ ${formatCurrency(laborRate)}/hr): ${formatCurrency(estimate.laborCost)}
Equipment: ${formatCurrency(estimate.equipmentCost)}

ADDITIONAL COSTS
Delivery Fee: ${formatCurrency(estimate.deliveryFee)}
Haul Away: ${formatCurrency(estimate.haulAway)}
Markup (${markupPercent}%): ${formatCurrency(estimate.markupAmount)}

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

COST BREAKDOWN
Subtotal: ${formatCurrency(estimate.subtotal)}
With Markup: ${formatCurrency(estimate.totalWithMarkup)}
Target Profit (40%): ${formatCurrency(estimate.targetProfit)}

RECOMMENDED CUSTOMER PRICE: ${formatCurrency(estimate.recommendedPrice)}
Profit Margin: ${estimate.profitMargin.toFixed(1)}%

‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ`;
      };

      const downloadEstimate = () => {
        const report = generateSummaryReport();
        const blob = new Blob([report], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `estimate-${projectName || 'landscape'}-${Date.now()}.txt`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      };

      return (
        <div style={{
          fontFamily: '"Space Mono", "Courier New", monospace',
          background: '#f5f5f5',
          minHeight: '100vh',
          padding: '40px 20px',
          color: '#2c3e50'
        }}>
          <div style={{
            maxWidth: '1400px',
            margin: '0 auto',
            background: '#ffffff',
            borderRadius: '16px',
            border: '1px solid #e0e0e0',
            boxShadow: '0 4px 20px rgba(0, 0, 0, 0.08)',
            overflow: 'hidden'
          }}>
            {/* Header */}
            <div style={{
              background: 'linear-gradient(90deg, #2ecc71 0%, #27ae60 100%)',
              padding: '32px',
              borderBottom: '1px solid #27ae60',
              display: 'flex',
              alignItems: 'center',
              gap: '16px'
            }}>
              <Leaf size={40} strokeWidth={2.5} style={{ color: '#ffffff' }} />
              <div>
                <h1 style={{
                  margin: 0,
                  fontSize: '32px',
                  fontWeight: 700,
                  letterSpacing: '1px',
                  textTransform: 'uppercase',
                  color: '#ffffff'
                }}>
                  Landscaping Cost Estimator
                </h1>
                <p style={{
                  margin: '8px 0 0 0',
                  opacity: 0.95,
                  fontSize: '14px',
                  letterSpacing: '0.5px',
                  color: '#ffffff'
                }}>
                  Professional project estimation & job costing
                </p>
              </div>
            </div>

            <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '1px', background: '#e0e0e0' }}>
              {/* Left Panel */}
              <div style={{ background: '#ffffff', padding: '32px' }}>
                {/* Project Info */}
                <div style={{ marginBottom: '32px' }}>
                  <h2 style={{
                    fontSize: '18px',
                    fontWeight: 700,
                    marginBottom: '20px',
                    color: '#27ae60',
                    display: 'flex',
                    alignItems: 'center',
                    gap: '8px',
                    textTransform: 'uppercase',
                    letterSpacing: '1px'
                  }}>
                    <FileText size={20} /> Project Details
                  </h2>
                  
                  <input
                    type="text"
                    placeholder="Project Name"
                    value={projectName}
                    onChange={(e) => setProjectName(e.target.value)}
                    style={{
                      width: '100%',
                      padding: '12px 16px',
                      marginBottom: '12px',
                      background: '#ffffff',
                      border: '2px solid #e0e0e0',
                      borderRadius: '8px',
                      color: '#2c3e50',
                      fontSize: '14px',
                      fontFamily: 'inherit',
                      outline: 'none'
                    }}
                  />
                  
                  <input
                    type="text"
                    placeholder="Project Type"
                    value={projectType}
                    onChange={(e) => setProjectType(e.target.value)}
                    style={{
                      width: '100%',
                      padding: '12px 16px',
                      background: '#ffffff',
                      border: '2px solid #e0e0e0',
                      borderRadius: '8px',
                      color: '#2c3e50',
                      fontSize: '14px',
                      fontFamily: 'inherit',
                      outline: 'none'
                    }}
                  />
                </div>

                {/* Material Selection */}
                <div style={{ marginBottom: '32px' }}>
                  <h2 style={{
                    fontSize: '18px',
                    fontWeight: 700,
                    marginBottom: '20px',
                    color: '#27ae60',
                    display: 'flex',
                    alignItems: 'center',
                    gap: '8px',
                    textTransform: 'uppercase',
                    letterSpacing: '1px'
                  }}>
                    <Layers size={20} /> Material Selection
                  </h2>

                  <select
                    value={materialCategory}
                    onChange={(e) => setMaterialCategory(e.target.value)}
                    style={{
                      width: '100%',
                      padding: '12px 16px',
                      marginBottom: '12px',
                      background: '#ffffff',
                      border: '2px solid #e0e0e0',
                      borderRadius: '8px',
                      color: '#2c3e50',
                      fontSize: '14px',
                      fontFamily: 'inherit',
                      outline: 'none',
                      cursor: 'pointer'
                    }}
                  >
                    <option value="mulch">Mulch</option>
                    <option value="rock">Decorative Rock</option>
                    <option value="dirt">Dirt/Soil</option>
                    <option value="sod">Sod</option>
                  </select>

                  <select
                    value={selectedMaterial ? selectedMaterial.name : ''}
                    onChange={(e) => {
                      const material = MATERIALS[materialCategory].find(m => m.name === e.target.value);
                      setSelectedMaterial(material);
                    }}
                    style={{
                      width: '100%',
                      padding: '12px 16px',
                      background: '#ffffff',
                      border: '2px solid #e0e0e0',
                      borderRadius: '8px',
                      color: '#2c3e50',
                      fontSize: '14px',
                      fontFamily: 'inherit',
                      outline: 'none',
                      cursor: 'pointer'
                    }}
                  >
                    {MATERIALS[materialCategory].map((material) => (
                      <option key={material.name} value={material.name}>
                        {material.name} - {materialCategory === 'sod' 
                          ? `${formatCurrency(material.pricePerSqFt)}/sq ft`
                          : `${formatCurrency(material.pricePerYard)}/yard`
                        }
                      </option>
                    ))}
                  </select>
                </div>

                {/* Google Maps Measurement */}
                <div style={{ marginBottom: '32px' }}>
                  <h2 style={{
                    fontSize: '18px',
                    fontWeight: 700,
                    marginBottom: '20px',
                    color: '#27ae60',
                    display: 'flex',
                    alignItems: 'center',
                    gap: '8px',
                    textTransform: 'uppercase',
                    letterSpacing: '1px'
                  }}>
                    <Map size={20} /> Google Maps Measurement
                  </h2>

                  <button
                    onClick={() => setShowMap(!showMap)}
                    style={{
                      width: '100%',
                      padding: '12px 16px',
                      marginBottom: '12px',
                      background: showMap ? '#27ae60' : '#ffffff',
                      border: '2px solid #27ae60',
                      borderRadius: '8px',
                      color: showMap ? '#ffffff' : '#27ae60',
                      fontSize: '14px',
                      fontWeight: 600,
                      cursor: 'pointer',
                      fontFamily: 'inherit',
                      transition: 'all 0.2s'
                    }}
                  >
                    {showMap ? '‚úì Map Active - Click to Hide' : 'üìç Open Map to Measure'}
                  </button>

                  {showMap && (
                    <>
                      <div 
                        ref={mapRef}
                        style={{
                          width: '100%',
                          height: '400px',
                          borderRadius: '8px',
                          border: '2px solid #e0e0e0',
                          marginBottom: '12px'
                        }}
                      />
                      
                      {mapMeasurements.length > 0 && (
                        <div style={{
                          background: '#f8f9fa',
                          border: '2px solid #e0e0e0',
                          borderRadius: '8px',
                          padding: '16px',
                          marginBottom: '12px'
                        }}>
                          <div style={{ 
                            display: 'flex', 
                            justifyContent: 'space-between', 
                            alignItems: 'center',
                            marginBottom: '12px',
                            paddingBottom: '12px',
                            borderBottom: '2px solid #e0e0e0'
                          }}>
                            <strong style={{ color: '#2c3e50' }}>Measurements ({mapMeasurements.length})</strong>
                            <button
                              onClick={clearMapMeasurements}
                              style={{
                                padding: '6px 12px',
                                background: '#e74c3c',
                                border: 'none',
                                borderRadius: '6px',
                                color: '#ffffff',
                                fontSize: '12px',
                                cursor: 'pointer',
                                fontFamily: 'inherit'
                              }}
                            >
                              Clear All
                            </button>
                          </div>
                          
                          {mapMeasurements.map((m, index) => (
                            <div key={m.id} style={{
                              display: 'flex',
                              justifyContent: 'space-between',
                              alignItems: 'center',
                              padding: '8px',
                              background: '#ffffff',
                              borderRadius: '6px',
                              marginBottom: '8px',
                              fontSize: '13px',
                              color: '#2c3e50'
                            }}>
                              <div>
                                <div><strong>Area {index + 1}:</strong> {m.area.toFixed(2)} sq ft</div>
                                <div style={{ fontSize: '12px', opacity: 0.7 }}>Perimeter: {m.perimeter.toFixed(2)} ft</div>
                              </div>
                              <button
                                onClick={() => removeMeasurement(m.id)}
                                style={{
                                  padding: '4px 8px',
                                  background: '#e74c3c',
                                  border: 'none',
                                  borderRadius: '4px',
                                  color: '#ffffff',
                                  fontSize: '11px',
                                  cursor: 'pointer'
                                }}
                              >
                                ‚úï
                              </button>
                            </div>
                          ))}
                          
                          <div style={{
                            marginTop: '12px',
                            paddingTop: '12px',
                            borderTop: '2px solid #e0e0e0',
                            fontWeight: 700,
                            color: '#2c3e50'
                          }}>
                            <div>Total Area: {totalMapArea.toFixed(2)} sq ft</div>
                            <div>Total Perimeter: {totalMapPerimeter.toFixed(2)} ft</div>
                          </div>
                          
                          <button
                            onClick={applyMapMeasurements}
                            style={{
                              width: '100%',
                              marginTop: '12px',
                              padding: '10px 16px',
                              background: 'linear-gradient(90deg, #27ae60 0%, #2ecc71 100%)',
                              border: 'none',
                              borderRadius: '6px',
                              color: '#ffffff',
                              fontSize: '13px',
                              fontWeight: 600,
                              cursor: 'pointer',
                              fontFamily: 'inherit',
                              boxShadow: '0 2px 8px rgba(39, 174, 96, 0.3)'
                            }}
                          >
                            ‚ûú Apply to Dimensions Below
                          </button>
                        </div>
                      )}

                      <div style={{
                        background: '#e3f2fd',
                        border: '2px solid #2196f3',
                        borderRadius: '8px',
                        padding: '12px',
                        fontSize: '12px',
                        color: '#1976d2'
                      }}>
                        <strong>üìå How to use:</strong>
                        <ul style={{ margin: '8px 0 0 20px', lineHeight: '1.6' }}>
                          <li>Use tools above map to draw rectangles or polygons</li>
                          <li>Draw multiple areas - they'll be totaled automatically</li>
                          <li>Click "Apply to Dimensions Below" to transfer measurements</li>
                          <li>You can still manually adjust dimensions after applying</li>
                        </ul>
                      </div>
                    </>
                  )}
                </div>

                {/* Dimensions */}
                <div style={{ marginBottom: '32px' }}>
                  <h2 style={{
                    fontSize: '18px',
                    fontWeight: 700,
                    marginBottom: '20px',
                    color: '#27ae60',
                    display: 'flex',
                    alignItems: 'center',
                    gap: '8px',
                    textTransform: 'uppercase',
                    letterSpacing: '1px'
                  }}>
                    <Calculator size={20} /> Dimensions
                  </h2>

                  {materialCategory === 'sod' ? (
                    <div>
                      <label style={{ display: 'block', marginBottom: '8px', fontSize: '13px', opacity: 0.9, color: '#2c3e50' }}>
                        Square Feet
                      </label>
                      <input
                        type="number"
                        placeholder="Enter square feet"
                        value={sqFt}
                        onChange={(e) => setSqFt(e.target.value)}
                        style={{
                          width: '100%',
                          padding: '12px 16px',
                          background: '#ffffff',
                          border: '2px solid #e0e0e0',
                          borderRadius: '8px',
                          color: '#2c3e50',
                          fontSize: '14px',
                          fontFamily: 'inherit',
                          outline: 'none'
                        }}
                      />
                    </div>
                  ) : (
                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '12px' }}>
                      <div>
                        <label style={{ display: 'block', marginBottom: '8px', fontSize: '13px', opacity: 0.9, color: '#2c3e50' }}>
                          Length (ft)
                        </label>
                        <input
                          type="number"
                          value={length}
                          onChange={(e) => setLength(e.target.value)}
                          style={{
                            width: '100%',
                            padding: '12px 16px',
                            background: '#ffffff',
                            border: '2px solid #e0e0e0',
                            borderRadius: '8px',
                            color: '#2c3e50',
                            fontSize: '14px',
                            fontFamily: 'inherit',
                            outline: 'none'
                          }}
                        />
                      </div>
                      <div>
                        <label style={{ display: 'block', marginBottom: '8px', fontSize: '13px', opacity: 0.9, color: '#2c3e50' }}>
                          Width (ft)
                        </label>
                        <input
                          type="number"
                          value={width}
                          onChange={(e) => setWidth(e.target.value)}
                          style={{
                            width: '100%',
                            padding: '12px 16px',
                            background: '#ffffff',
                            border: '2px solid #e0e0e0',
                            borderRadius: '8px',
                            color: '#2c3e50',
                            fontSize: '14px',
                            fontFamily: 'inherit',
                            outline: 'none'
                          }}
                        />
                      </div>
                      <div style={{ gridColumn: '1 / -1' }}>
                        <label style={{ display: 'block', marginBottom: '8px', fontSize: '13px', opacity: 0.9, color: '#2c3e50' }}>
                          Depth (inches)
                        </label>
                        <input
                          type="number"
                          value={depth}
                          onChange={(e) => setDepth(e.target.value)}
                          style={{
                            width: '100%',
                            padding: '12px 16px',
                            background: '#ffffff',
                            border: '2px solid #e0e0e0',
                            borderRadius: '8px',
                            color: '#2c3e50',
                            fontSize: '14px',
                            fontFamily: 'inherit',
                            outline: 'none'
                          }}
                        />
                      </div>
                    </div>
                  )}
                </div>

                {/* Add-ons */}
                <div style={{ marginBottom: '32px' }}>
                  <h2 style={{
                    fontSize: '18px',
                    fontWeight: 700,
                    marginBottom: '20px',
                    color: '#27ae60',
                    display: 'flex',
                    alignItems: 'center',
                    gap: '8px',
                    textTransform: 'uppercase',
                    letterSpacing: '1px'
                  }}>
                    <Package size={20} /> Add-ons
                  </h2>

                  <label style={{
                    display: 'flex',
                    alignItems: 'center',
                    gap: '12px',
                    marginBottom: '12px',
                    cursor: 'pointer',
                    padding: '12px',
                    background: includeGeoTextile ? '#e8f5e9' : '#ffffff',
                    borderRadius: '8px',
                    border: '2px solid ' + (includeGeoTextile ? '#27ae60' : '#e0e0e0')
                  }}>
                    <input
                      type="checkbox"
                      checked={includeGeoTextile}
                      onChange={(e) => setIncludeGeoTextile(e.target.checked)}
                      style={{ cursor: 'pointer' }}
                    />
                    <span style={{ flex: 1, color: '#2c3e50' }}>Geo Textile Fabric (${ADDONS.geoTextile.pricePerLinearFt}/ft)</span>
                  </label>

                  {includeGeoTextile && (
                    <input
                      type="number"
                      placeholder="Linear feet"
                      value={geoTextileLinearFt}
                      onChange={(e) => setGeoTextileLinearFt(e.target.value)}
                      style={{
                        width: '100%',
                        padding: '12px 16px',
                        marginBottom: '12px',
                        background: '#ffffff',
                        border: '2px solid #e0e0e0',
                        borderRadius: '8px',
                        color: '#2c3e50',
                        fontSize: '14px',
                        fontFamily: 'inherit',
                        outline: 'none'
                      }}
                    />
                  )}

                  <label style={{
                    display: 'flex',
                    alignItems: 'center',
                    gap: '12px',
                    marginBottom: '12px',
                    cursor: 'pointer',
                    padding: '12px',
                    background: includeEdging ? '#e8f5e9' : '#ffffff',
                    borderRadius: '8px',
                    border: '2px solid ' + (includeEdging ? '#27ae60' : '#e0e0e0')
                  }}>
                    <input
                      type="checkbox"
                      checked={includeEdging}
                      onChange={(e) => setIncludeEdging(e.target.checked)}
                      style={{ cursor: 'pointer' }}
                    />
                    <span style={{ flex: 1, color: '#2c3e50' }}>Composite Edging (${ADDONS.edging.pricePerLinearFt}/ft)</span>
                  </label>

                  {includeEdging && (
                    <input
                      type="number"
                      placeholder="Linear feet"
                      value={edgingLinearFt}
                      onChange={(e) => setEdgingLinearFt(e.target.value)}
                      style={{
                        width: '100%',
                        padding: '12px 16px',
                        background: '#ffffff',
                        border: '2px solid #e0e0e0',
                        borderRadius: '8px',
                        color: '#2c3e50',
                        fontSize: '14px',
                        fontFamily: 'inherit',
                        outline: 'none'
                      }}
                    />
                  )}
                </div>

                {/* Equipment Section */}
                <div style={{ marginBottom: '32px' }}>
                  <h2 style={{
                    fontSize: '18px',
                    fontWeight: 700,
                    marginBottom: '20px',
                    color: '#27ae60',
                    display: 'flex',
                    alignItems: 'center',
                    gap: '8px',
                    textTransform: 'uppercase',
                    letterSpacing: '1px'
                  }}>
                    üîß Equipment
                  </h2>

                  {equipmentRows.map((row, index) => (
                    <div key={index} style={{ display: 'grid', gridTemplateColumns: '2fr 1fr', gap: '12px', marginBottom: '12px' }}>
                      <input
                        type="text"
                        placeholder="Equipment description"
                        value={row.description}
                        onChange={(e) => updateEquipmentRow(index, 'description', e.target.value)}
                        style={{
                          width: '100%',
                          padding: '12px 16px',
                          background: '#ffffff',
                          border: '2px solid #e0e0e0',
                          borderRadius: '8px',
                          color: '#2c3e50',
                          fontSize: '14px',
                          fontFamily: 'inherit',
                          outline: 'none'
                        }}
                      />
                      <input
                        type="number"
                        placeholder="Cost"
                        value={row.cost}
                        onChange={(e) => updateEquipmentRow(index, 'cost', e.target.value)}
                        style={{
                          width: '100%',
                          padding: '12px 16px',
                          background: '#ffffff',
                          border: '2px solid #e0e0e0',
                          borderRadius: '8px',
                          color: '#2c3e50',
                          fontSize: '14px',
                          fontFamily: 'inherit',
                          outline: 'none'
                        }}
                      />
                    </div>
                  ))}
                </div>

                {/* Labor & Costs */}
                <div>
                  <h2 style={{
                    fontSize: '18px',
                    fontWeight: 700,
                    marginBottom: '20px',
                    color: '#27ae60',
                    display: 'flex',
                    alignItems: 'center',
                    gap: '8px',
                    textTransform: 'uppercase',
                    letterSpacing: '1px'
                  }}>
                    <DollarSign size={20} /> Labor & Additional
                  </h2>

                  <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '12px', marginBottom: '12px' }}>
                    <div>
                      <label style={{ display: 'block', marginBottom: '8px', fontSize: '13px', opacity: 0.9, color: '#2c3e50' }}>
                        Labor Hours
                      </label>
                      <input
                        type="number"
                        value={laborHours}
                        onChange={(e) => setLaborHours(e.target.value)}
                        style={{
                          width: '100%',
                          padding: '12px 16px',
                          background: '#ffffff',
                          border: '2px solid #e0e0e0',
                          borderRadius: '8px',
                          color: '#2c3e50',
                          fontSize: '14px',
                          fontFamily: 'inherit',
                          outline: 'none'
                        }}
                      />
                    </div>
                    <div>
                      <label style={{ display: 'block', marginBottom: '8px', fontSize: '13px', opacity: 0.9, color: '#2c3e50' }}>
                        Rate ($/hr)
                      </label>
                      <input
                        type="number"
                        value={laborRate}
                        onChange={(e) => setLaborRate(e.target.value)}
                        style={{
                          width: '100%',
                          padding: '12px 16px',
                          background: '#ffffff',
                          border: '2px solid #e0e0e0',
                          borderRadius: '8px',
                          color: '#2c3e50',
                          fontSize: '14px',
                          fontFamily: 'inherit',
                          outline: 'none'
                        }}
                      />
                    </div>
                  </div>

                  <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '12px', marginBottom: '12px' }}>
                    <div>
                      <label style={{ display: 'block', marginBottom: '8px', fontSize: '13px', opacity: 0.9, color: '#2c3e50' }}>
                        Delivery Fee
                      </label>
                      <input
                        type="number"
                        value={deliveryFee}
                        onChange={(e) => setDeliveryFee(e.target.value)}
                        placeholder="0"
                        style={{
                          width: '100%',
                          padding: '12px 16px',
                          background: '#ffffff',
                          border: '2px solid #e0e0e0',
                          borderRadius: '8px',
                          color: '#2c3e50',
                          fontSize: '14px',
                          fontFamily: 'inherit',
                          outline: 'none'
                        }}
                      />
                    </div>
                    <div>
                      <label style={{ display: 'block', marginBottom: '8px', fontSize: '13px', opacity: 0.9, color: '#2c3e50' }}>
                        Haul Away
                      </label>
                      <input
                        type="number"
                        value={haulAway}
                        onChange={(e) => setHaulAway(e.target.value)}
                        placeholder="0"
                        style={{
                          width: '100%',
                          padding: '12px 16px',
                          background: '#ffffff',
                          border: '2px solid #e0e0e0',
                          borderRadius: '8px',
                          color: '#2c3e50',
                          fontSize: '14px',
                          fontFamily: 'inherit',
                          outline: 'none'
                        }}
                      />
                    </div>
                  </div>

                  <div style={{ gridColumn: '1 / -1' }}>
                    <label style={{ display: 'block', marginBottom: '8px', fontSize: '13px', opacity: 0.9, color: '#2c3e50' }}>
                      Markup (%)
                    </label>
                    <input
                      type="number"
                      value={markupPercent}
                      onChange={(e) => setMarkupPercent(e.target.value)}
                      placeholder="0"
                      style={{
                        width: '100%',
                        padding: '12px 16px',
                        background: '#ffffff',
                        border: '2px solid #e0e0e0',
                        borderRadius: '8px',
                        color: '#2c3e50',
                        fontSize: '14px',
                        fontFamily: 'inherit',
                        outline: 'none'
                      }}
                    />
                  </div>
                </div>
              </div>

              {/* Right Panel - Summary */}
              <div style={{ background: '#fafafa', padding: '32px' }}>
                <h2 style={{
                  fontSize: '18px',
                  fontWeight: 700,
                  marginBottom: '24px',
                  color: '#27ae60',
                  textTransform: 'uppercase',
                  letterSpacing: '1px'
                }}>
                  Estimate Summary
                </h2>

                {estimate && (
                  <div>
                    <div style={{
                      background: '#f8f9fa',
                      border: '2px solid #e0e0e0',
                      borderRadius: '8px',
                      padding: '20px',
                      marginBottom: '24px'
                    }}>
                      <h3 style={{
                        fontSize: '14px',
                        fontWeight: 700,
                        marginBottom: '16px',
                        color: '#27ae60',
                        textTransform: 'uppercase',
                        letterSpacing: '1px'
                      }}>
                        Measurements
                      </h3>
                      {materialCategory !== 'sod' && (
                        <>
                          <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px', fontSize: '13px', color: '#2c3e50' }}>
                            <span style={{ opacity: 0.7 }}>Area:</span>
                            <span style={{ fontWeight: 600 }}>{estimate.totalSqFt.toFixed(2)} sq ft</span>
                          </div>
                          <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px', fontSize: '13px', color: '#2c3e50' }}>
                            <span style={{ opacity: 0.7 }}>Volume:</span>
                            <span style={{ fontWeight: 600 }}>{estimate.cubicYards.toFixed(2)} cu yd</span>
                          </div>
                          <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '13px', color: '#2c3e50' }}>
                            <span style={{ opacity: 0.7 }}>Cubic Feet:</span>
                            <span style={{ fontWeight: 600 }}>{estimate.cubicFeet.toFixed(2)} cu ft</span>
                          </div>
                        </>
                      )}
                      {materialCategory === 'sod' && (
                        <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '13px', color: '#2c3e50' }}>
                          <span style={{ opacity: 0.7 }}>Area:</span>
                          <span style={{ fontWeight: 600 }}>{estimate.totalSqFt.toFixed(2)} sq ft</span>
                        </div>
                      )}
                    </div>

                    <div style={{
                      background: '#ffffff',
                      border: '2px solid #e0e0e0',
                      borderRadius: '8px',
                      padding: '20px',
                      marginBottom: '24px'
                    }}>
                      <h3 style={{
                        fontSize: '14px',
                        fontWeight: 700,
                        marginBottom: '16px',
                        color: '#27ae60',
                        textTransform: 'uppercase',
                        letterSpacing: '1px'
                      }}>
                        Cost Breakdown
                      </h3>
                      
                      <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px', fontSize: '13px', color: '#2c3e50' }}>
                        <span style={{ opacity: 0.7 }}>Material:</span>
                        <span style={{ fontWeight: 600 }}>{formatCurrency(estimate.materialCost)}</span>
                      </div>
                      
                      {estimate.addOnsCost > 0 && (
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px', fontSize: '13px', color: '#2c3e50' }}>
                          <span style={{ opacity: 0.7 }}>Add-ons:</span>
                          <span style={{ fontWeight: 600 }}>{formatCurrency(estimate.addOnsCost)}</span>
                        </div>
                      )}
                      
                      {estimate.laborCost > 0 && (
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px', fontSize: '13px', color: '#2c3e50' }}>
                          <span style={{ opacity: 0.7 }}>Labor:</span>
                          <span style={{ fontWeight: 600 }}>{formatCurrency(estimate.laborCost)}</span>
                        </div>
                      )}
                      
                      {estimate.equipmentCost > 0 && (
                        <>
                          <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px', fontSize: '13px', color: '#2c3e50' }}>
                            <span style={{ opacity: 0.7 }}>Equipment Total:</span>
                            <span style={{ fontWeight: 600 }}>{formatCurrency(estimate.equipmentCost)}</span>
                          </div>
                          {estimate.equipmentRows && estimate.equipmentRows.length > 0 && (
                            <div style={{ marginLeft: '16px', marginBottom: '8px' }}>
                              {estimate.equipmentRows.map((row, index) => (
                                row.description && (
                                  <div key={index} style={{ display: 'flex', justifyContent: 'space-between', fontSize: '12px', color: '#7f8c8d', marginBottom: '4px' }}>
                                    <span>‚Ä¢ {row.description}</span>
                                    <span>{formatCurrency(row.cost)}</span>
                                  </div>
                                )
                              ))}
                            </div>
                          )}
                        </>
                      )}
                      
                      {estimate.deliveryFee > 0 && (
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px', fontSize: '13px', color: '#2c3e50' }}>
                          <span style={{ opacity: 0.7 }}>Delivery:</span>
                          <span style={{ fontWeight: 600 }}>{formatCurrency(estimate.deliveryFee)}</span>
                        </div>
                      )}
                      
                      {estimate.haulAway > 0 && (
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '8px', fontSize: '13px', color: '#2c3e50' }}>
                          <span style={{ opacity: 0.7 }}>Haul Away:</span>
                          <span style={{ fontWeight: 600 }}>{formatCurrency(estimate.haulAway)}</span>
                        </div>
                      )}
                      
                      <div style={{
                        borderTop: '2px solid #e0e0e0',
                        marginTop: '12px',
                        paddingTop: '12px',
                        display: 'flex',
                        justifyContent: 'space-between',
                        fontSize: '14px',
                        color: '#2c3e50'
                      }}>
                        <span style={{ fontWeight: 700 }}>Subtotal:</span>
                        <span style={{ fontWeight: 700 }}>{formatCurrency(estimate.subtotal)}</span>
                      </div>
                      
                      {estimate.markupAmount > 0 && (
                        <div style={{ display: 'flex', justifyContent: 'space-between', marginTop: '8px', fontSize: '13px', color: '#2c3e50' }}>
                          <span style={{ opacity: 0.7 }}>Markup:</span>
                          <span style={{ fontWeight: 600 }}>{formatCurrency(estimate.markupAmount)}</span>
                        </div>
                      )}
                      
                      <div style={{
                        display: 'flex',
                        justifyContent: 'space-between',
                        marginTop: '8px',
                        fontSize: '14px',
                        fontWeight: 700,
                        color: '#2c3e50'
                      }}>
                        <span>Total with Markup:</span>
                        <span>{formatCurrency(estimate.totalWithMarkup)}</span>
                      </div>
                    </div>

                    <div style={{
                      background: estimate.profitMargin >= 40 ? '#e8f5e9' : '#fff3e0',
                      border: '2px solid ' + (estimate.profitMargin >= 40 ? '#27ae60' : '#f39c12'),
                      borderRadius: '8px',
                      padding: '24px',
                      marginBottom: '24px'
                    }}>
                      <h3 style={{
                        fontSize: '14px',
                        fontWeight: 700,
                        marginBottom: '16px',
                        color: estimate.profitMargin >= 40 ? '#27ae60' : '#f39c12',
                        textTransform: 'uppercase',
                        letterSpacing: '1px'
                      }}>
                        Pricing Recommendation
                      </h3>
                      
                      <div style={{
                        fontSize: '28px',
                        fontWeight: 700,
                        marginBottom: '12px',
                        color: estimate.profitMargin >= 40 ? '#27ae60' : '#f39c12'
                      }}>
                        {formatCurrency(estimate.recommendedPrice)}
                      </div>
                      
                      <div style={{ fontSize: '13px', opacity: 0.9, marginBottom: '12px', color: '#2c3e50' }}>
                        Target profit margin: {estimate.profitMargin.toFixed(1)}%
                      </div>
                      
                      <div style={{
                        fontSize: '12px',
                        opacity: 0.9,
                        padding: '12px',
                        background: 'rgba(255, 255, 255, 0.8)',
                        borderRadius: '6px',
                        color: '#2c3e50'
                      }}>
                        {estimate.profitMargin >= 40 
                          ? '‚úì This project meets the 40% profit margin goal'
                          : '‚ö† This project is below the 40% profit margin goal'
                        }
                      </div>
                      
                      <div style={{
                        marginTop: '12px',
                        fontSize: '12px',
                        opacity: 0.7,
                        color: '#2c3e50'
                      }}>
                        Expected profit: {formatCurrency(estimate.targetProfit)}
                      </div>
                    </div>

                    <button
                      onClick={downloadEstimate}
                      style={{
                        width: '100%',
                        padding: '16px',
                        background: 'linear-gradient(90deg, #27ae60 0%, #2ecc71 100%)',
                        border: 'none',
                        borderRadius: '8px',
                        color: '#ffffff',
                        fontSize: '14px',
                        fontWeight: 700,
                        textTransform: 'uppercase',
                        letterSpacing: '1px',
                        cursor: 'pointer',
                        display: 'flex',
                        alignItems: 'center',
                        justifyContent: 'center',
                        gap: '8px',
                        fontFamily: 'inherit',
                        transition: 'all 0.2s',
                        boxShadow: '0 2px 8px rgba(39, 174, 96, 0.3)'
                      }}
                    >
                      <Download size={18} />
                      Download Report
                    </button>
                  </div>
                )}

                {!estimate && (
                  <div style={{
                    textAlign: 'center',
                    padding: '60px 20px',
                    opacity: 0.5
                  }}>
                    <Calculator size={48} style={{ marginBottom: '16px', opacity: 0.3, color: '#7f8c8d' }} />
                    <p style={{ fontSize: '14px', color: '#7f8c8d' }}>Enter project details to generate estimate</p>
                  </div>
                )}
              </div>
            </div>

            <div style={{
              background: '#f8f9fa',
              padding: '16px 32px',
              borderTop: '1px solid #e0e0e0',
              textAlign: 'center',
              fontSize: '12px',
              opacity: 0.7,
              color: '#7f8c8d'
            }}>
              Professional landscaping estimator ‚Ä¢ Integrated material cost database & job costing
            </div>
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<LandscapingEstimator />);
  </script>
</body>
</html>
